!function i(a,u,s){function l(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return l(a[t][1][e]||e)},o,o.exports,i,a,u,s)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,h,t){"use strict";!function(){function a(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function i(n,r,o){var i,e=new Promise(function(e,t){a(i=n[r].apply(n,o)).then(e,t)});return e.request=i,e}function e(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function t(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return i(this[n],e,arguments)})})}function n(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function r(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=i(e,n,arguments)).then(function(e){if(e)return new u(e,t.request)});var e,t})})}function o(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function l(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function c(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new l(n)}function d(e){this._db=e}e(o,"_index",["name","keyPath","multiEntry","unique"]),t(o,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),r(o,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(u,"_cursor",["direction","key","primaryKey","value"]),t(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(u.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),a(t._request).then(function(e){if(e)return new u(e,t._request)})})})}),s.prototype.createIndex=function(){return new o(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new o(this._store.index.apply(this._store,arguments))},e(s,"_store",["name","keyPath","indexNames","autoIncrement"]),t(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),r(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),n(s,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},e(l,"_tx",["objectStoreNames","mode"]),n(l,"_tx",IDBTransaction,["abort"]),c.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},e(c,"_db",["name","version","objectStoreNames"]),n(c,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},e(d,"_db",["name","version","objectStoreNames"]),n(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[s,o].forEach(function(e){e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],r=this._store||this._index,o=r[i].apply(r,t.slice(0,-1));o.onsuccess=function(){n(o.result)}}})}),[o,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,o=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(o.push(e.value),void 0===n||o.length!=n?e.continue():t(o)):t(o)})})})});var f={open:function(e,t,n){var r=i(indexedDB,"open",[e,t]),o=r.request;return o.onupgradeneeded=function(e){n&&n(new c(o.result,e.oldVersion,o.transaction))},r.then(function(e){return new d(e)})},delete:function(e){return i(indexedDB,"deleteDatabase",[e])}};void 0!==h?(h.exports=f,h.exports.default=h.exports):self.idb=f}()},{}],2:[function(e,t,n){"use strict";var r,o=e("./js/_controller.js"),i=(r=o)&&r.__esModule?r:{default:r},a=e("./js/_utils.js");document.addEventListener("DOMContentLoaded",function(e){(new i.default).registerServiceWorker()}),window.initMap=function(){"/restaurant.html"===location.pathname?(0,a.initRestaurant)():(0,a.initRestaurantList)()},window.onload=function(){(0,a.startIntersectionObserver)()}},{"./js/_controller.js":3,"./js/_utils.js":5}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._serviceWorkerURL="./../service-worker.js",this._serviceWorkerScope="./"}return r(e,[{key:"registerServiceWorker",value:function(){var t=this;if(!(!1 in navigator)){navigator.serviceWorker.register(this._serviceWorkerURL,{scope:this._serviceWorkerScope}).then(function(e){navigator.serviceWorker.controller&&(e.waiting?t._updateReady(e.waiting):e.installing?t._trackInstalling(e.installing):e.addEventListener("updatefound",function(){t._trackInstalling(e.installing)}))}).catch(function(e){return console.error("Failed to register ServiceWorker",e)});var n=void 0;navigator.serviceWorker.addEventListener("controllerchange",function(e){n||(window.location.origin===document.referrer&&window.location.reload(),n=!0)})}}},{key:"_trackInstalling",value:function(e){var t=this;e.addEventListener("statechange",function(){console.log("Update state changed"),"installed"===e.state&&t._updateReady(e)})}},{key:"_updateReady",value:function(e){console.log("Update ready"),e.postMessage({action:"skipWaiting"})}}]),e}();n.default=o},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("idb"),u=(r=i)&&r.__esModule?r:{default:r};var a=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}return o(a,null,[{key:"addRestaurants",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a._fillIdb(e)}},{key:"addNeighborhoods",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a._fillIdb(e,"neighborhoods")}},{key:"addCuisines",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a._fillIdb(e,"cuisines")}},{key:"_fillIdb",value:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"restaurants";a.dbPromise.then(function(e){if(!e)return Promise.reject("db undefined");var t=e.transaction(o,"readwrite"),n=t.objectStore(o);return r&&r.forEach(function(e){n.put(e)}),t.complete}).then(function(){console.log("Transaction successful")}).catch(function(e){console.error("Transaction failed: ",e)})}},{key:"_showCachedData",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"restaurants";arguments[1];return a.dbPromise.then(function(e){return e?e.transaction(t).objectStore(t).getAll():Promise.reject("db undefined")})}},{key:"_fetchData",value:function(t,n){var r=void 0;switch(t.url){case a.DB_NEIGHBORHOOD_TYPES_URL.url:r="neighborhoods";break;case a.DB_CUISINE_TYPES_URL.url:r="cuisines";break;default:r="restaurants"}a._showCachedData(r,n).then(function(e){if(!(e&&0<e.length))throw new Error("Database is empty: "+r);n(null,e)}).catch(function(e){fetch(t).then(function(e){return e.json()}).then(function(e){if(!e)throw new Error("No data available: "+r);n(null,e)}).catch(function(e){n(e,null)})})}},{key:"fetchRestaurants",value:function(e){a._fetchData(a.DATABASE_URL,e)}},{key:"fetchNeighborhoodTypes",value:function(e){a._fetchData(a.DB_NEIGHBORHOOD_TYPES_URL,e)}},{key:"fetchCuisinesTypes",value:function(e){a._fetchData(a.DB_CUISINE_TYPES_URL,e)}},{key:"fetchRestaurantById",value:function(r,o){a.fetchRestaurants(function(e,t){if(e)o(e,null);else{var n=t.find(function(e){return e.id==r});n?o(null,n):o("Restaurant does not exist",null)}})}},{key:"fetchNeighborhoodById",value:function(r,o){a.fetchNeighborhoodTypes(function(e,t){if(e)o(e,null);else{var n=t.find(function(e){return e.id==r});n?o(null,n):o("Neighborhood does not exist",null)}})}},{key:"fetchCuisineById",value:function(r,o){a.fetchCuisinesTypes(function(e,t){if(e)o(e,null);else{var n=t.find(function(e){return e.id==r});n?o(null,n):o("Cuisine does not exist",null)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,o,i){a.fetchRestaurants(function(e,t){if(e)i(e,null);else{var n=t;a.addRestaurants(n),-1!=r&&(n=n.filter(function(e){return e.cuisine_type_id==r})),-1!=o&&(n=n.filter(function(e){return e.neighborhood_type_id==o})),i(null,n)}})}},{key:"fetchNeighborhoods",value:function(n){a.fetchNeighborhoodTypes(function(e,t){e?n(e,null):(a.addNeighborhoods(t),n(null,t))})}},{key:"fetchCuisines",value:function(n){a.fetchCuisinesTypes(function(e,t){e?n(e,null):(a.addCuisines(t),n(null,t))})}},{key:"calculateRatingByReviews",value:function(e){return e?(e.reduce(function(e,t){return e+Number(t.rating)},0)/e.length).toFixed(1):"-"}},{key:"getOperatingHours",value:function(e){return e?e[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()]].replace(","," &"):"N.A."}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"mapMarkerForRestaurant",value:function(e,t){return"undefined"==typeof google?null:new google.maps.Marker({position:e.latlng,title:e.name,url:a.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"dbPromise",get:function(){return navigator.serviceWorker?u.default.open("fressen-db",1,function(e){if(!e.objectStoreNames.contains("neighborhoods"))e.createObjectStore("neighborhoods",{keyPath:"id"});if(!e.objectStoreNames.contains("cuisines"))e.createObjectStore("cuisines",{keyPath:"id"});if(!e.objectStoreNames.contains("restaurants"))e.createObjectStore("restaurants",{keyPath:"id"})}):Promise.resolve()}},{key:"BASE_URL",get:function(){return"http://localhost:1337"}},{key:"DATABASE_URL",get:function(){return new Request(a.BASE_URL+"/restaurants")}},{key:"DB_NEIGHBORHOOD_TYPES_URL",get:function(){return new Request(a.BASE_URL+"/neighborhoods")}},{key:"DB_CUISINE_TYPES_URL",get:function(){return new Request(a.BASE_URL+"/cuisines")}}]),a}();n.default=a},{idb:1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.startIntersectionObserver=n.handleIntersection=n.fetchImage=n.loadImage=n.initRestaurant=n.initRestaurantList=n.getId=n.getParameterByName=void 0;var i=a(e("./_dbhelper.js")),r=a(e("./restaurant.js")),o=a(e("./index.js"));function a(e){return e&&e.__esModule?e:{default:e}}n.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},n.getId=function e(t){var n="neighborhood-",r="cuisine-",o="restaurant-";return t?t.id?t.id.startsWith(n)?t.id.replace(n,""):t.id.startsWith(r)?t.id.replace(r,""):t.id.startsWith(o)?t.id.replace(o,""):e(t.parentElement):e(t.parentElement):-1},n.initRestaurantList=function(){var e=void 0;if(document.querySelector("#map").style.display="undefined"==typeof google?"none":"block","undefined"!=typeof google){e=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1})}var t=new o.default(e);t.fetchNeighborhoods(),t.fetchCuisines(),t.updateRestaurants()},n.initRestaurant=function(){(new r.default).fetchRestaurantFromURL(function(e,t){if(e)console.error(e);else{var n=document.querySelector("#map"),r=document.createElement("h3");if(r.classList.add("error"),r.textContent="Google Maps not available","undefined"==typeof google)n.appendChild(r);else{n.hasChildNodes()&&n.removeChild(r);var o=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1});i.default.mapMarkerForRestaurant(t,o)}}})};var u=n.loadImage=function(e){var t=e.dataset.srcset.split(","),n=1===window.devicePixelRatio?t[0].replace(" 1x",""):t[1].replace(" 2x","");s(n).then(function(){e.src=n})},s=n.fetchImage=function(r){return new Promise(function(e,t){var n=new Image;n.src=r,n.onload=e,n.onerror=t})},l=n.handleIntersection=function(e,t){e.forEach(function(e){0<e.intersectionRatio&&(t.unobserve(e.target),u(e.target))})};n.startIntersectionObserver=function(){var t=new IntersectionObserver(l,{rootMargin:"0px",threshold:[.1]});document.querySelectorAll("img.restaurant-img").forEach(function(e){t.observe(e)})}},{"./_dbhelper.js":4,"./index.js":6,"./restaurant.js":7}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./_dbhelper.js"),f=(r=i)&&r.__esModule?r:{default:r},h=e("./_utils.js");var a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._map=e,this._restaurants=[],this._neighborhoods=[],this._cuisines=[],this._markers=[],this._selectedNeighborhoodId=-1,this._selectedCuisineId=-1}return o(t,[{key:"_updateSelection",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"neighborhood",n=(0,h.getId)(e);if(n&&-1!=n){var r=document.getElementById(t+"-"+n),o=r.classList;o.toggle("selected");var i="neighborhood"===t?this._selectedNeighborhoodId:this._selectedCuisineId;if(i&&-1!=i&&i!=n){var a=document.getElementById(t+"-"+i);a.classList.remove("selected"),a.setAttribute("aria-selected","false")}o.contains("selected")?r.setAttribute("aria-selected","true"):r.setAttribute("aria-selected","false"),n=o.contains("selected")?n:-1}return n}},{key:"fetchNeighborhoods",value:function(){var n=this;f.default.fetchNeighborhoods(function(e,t){e?console.error(e):(n._neighborhoods=t,n._fillNeighborhoodsHTML())})}},{key:"fetchCuisines",value:function(){var n=this;f.default.fetchCuisines(function(e,t){e?console.error(e):(n._cuisines=t,n._fillCuisinesHTML())})}},{key:"_fillNeighborhoodsHTML",value:function(){var n=this,e=document.getElementById("neighborhood-template").innerHTML,t="",r=!0,o=!1,i=void 0;try{for(var a,u=this._neighborhoods[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;t+=e.replace(/{id}/g,s.id).replace(/{name}/g,s.name).replace(/{icon}/g,s.icon).replace(/{altText}/g,s.altText)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}var l=document.getElementById("neighborhoods");l.innerHTML=t,l.addEventListener("click",function(e){if(e.preventDefault(),!e.target.classList.contains("horizontal-scrolling")){var t=document.getElementById("map");t&&t.classList.remove("hide"),n._selectedNeighborhoodId=n._updateSelection(e.target,"neighborhood"),n.updateRestaurants()}})}},{key:"_fillCuisinesHTML",value:function(){var n=this,e=document.getElementById("cuisine-template").innerHTML,t="",r=!0,o=!1,i=void 0;try{for(var a,u=this._cuisines[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;t+=e.replace(/{id}/g,s.id).replace(/{name}/g,s.name).replace(/{icon}/g,s.icon).replace(/{altText}/g,s.altText)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}var l=document.getElementById("cuisines");l.innerHTML=t,l.addEventListener("click",function(e){if(e.preventDefault(),!e.target.classList.contains("horizontal-scrolling")){var t=document.getElementById("map");t&&t.classList.remove("hide"),n._selectedCuisineId=n._updateSelection(e.target,"cuisine"),n.updateRestaurants()}})}},{key:"_fillRestaurantsHTML",value:function(){var e=document.getElementById("restaurant-template").innerHTML,t="",n=!0,r=!1,o=void 0;try{for(var i,a=this._restaurants[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value,s=f.default.calculateRatingByReviews(u.reviews),l=f.default.getOperatingHours(u.operating_hours);t+=e.replace(/{id}/g,u.id).replace(/{name}/g,u.name).replace(/{address}/g,u.address).replace(/{operatingHours}/g,l).replace(/{rating}/g,s)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}var c=document.getElementById("restaurants");if(t)c.innerHTML=t;else{var d=document.getElementById("empty-view").innerHTML;c.innerHTML=d}(0,h.startIntersectionObserver)(),this._addMarkersToMap(),c.addEventListener("click",function(e){e.preventDefault();var t=(0,h.getId)(e.target);0<t&&window.location.replace("restaurant.html?id="+t)})}},{key:"updateRestaurants",value:function(){var n=this;f.default.fetchRestaurantByCuisineAndNeighborhood(this._selectedCuisineId,this._selectedNeighborhoodId,function(e,t){e?console.error(e):(n._resetRestaurants(),n._restaurants=t,requestAnimationFrame(n._fillRestaurantsHTML.bind(n)))})}},{key:"_resetRestaurants",value:function(){this._restaurants=[];var e=!(document.getElementById("restaurants").innerHTML=""),t=!1,n=void 0;try{for(var r,o=this._markers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;i&&i.setMap(null)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}this._markers=[]}},{key:"_addMarkersToMap",value:function(){var n=this;if("undefined"!=typeof google){var r=0,o=0,e=function(e){var t=f.default.mapMarkerForRestaurant(e,n._map);n._markers.push(t),google.maps.event.trigger(n._map,"resize"),google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),r+=e.latlng.lat,o+=e.latlng.lng},t=!0,i=!1,a=void 0;try{for(var u,s=this._restaurants[Symbol.iterator]();!(t=(u=s.next()).done);t=!0){e(u.value)}}catch(e){i=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw a}}r/=this._restaurants.length,o/=this._restaurants.length,this._map&&this._map.setCenter({lat:r,lng:o})}}}]),t}();n.default=a},{"./_dbhelper.js":4,"./_utils.js":5}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./_dbhelper.js"),a=(r=i)&&r.__esModule?r:{default:r},u=e("./_utils.js");var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._restaurant=""}return o(e,[{key:"fetchRestaurantFromURL",value:function(n){var r=this;if(this._restaurant)n(null,this._restaurant);else{var e=(0,u.getParameterByName)("id");e?a.default.fetchRestaurantById(e,function(e,t){t?(r._restaurant=t,document.getElementById("title").textContent+=t.name,document.getElementById("name").textContent=t.name,document.getElementById("breadcrumb-name").textContent=t.name,r._fillRestaurantHTML(),n(null,r._restaurant)):console.error(e)}):n("Restaurant id undefined: '"+e+"'",null)}}},{key:"_fillRestaurantHTML",value:function(){var e=document.getElementById("restaurant-template").innerHTML,t=this._restaurant,n="",r=a.default.calculateRatingByReviews(t.reviews);n+=e.replace(/{id}/g,t.id).replace(/{name}/g,t.name).replace(/{lat}/g,t.latlng.lat).replace(/{lng}/g,t.latlng.lng).replace(/{address}/g,t.address).replace(/{rating}/g,r),document.getElementById("restaurant-container").innerHTML=n,this._fillRestaurantHours(),this._fillNeighborhood(),this._fillCuisine(),this._fillReviewsHTML()}},{key:"_fillRestaurantHours",value:function(){if(this._restaurant.operating_hours){var e=this._restaurant.operating_hours,t=document.getElementById("operating-hours-all");for(var n in e){var r=document.createElement("tr");r.setAttribute("aria-label",n+" open from "+e[n]);var o=document.createElement("td");o.innerHTML=n,r.appendChild(o);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}}else console.info("No operating hours")}},{key:"_fillNeighborhood",value:function(){if(this._restaurant.neighborhood_type_id){var e=this._restaurant.neighborhood_type_id;a.default.fetchNeighborhoodById(e,function(e,t){t?document.getElementById("neighborhood-name").textContent="in "+t.name:console.error(e)})}}},{key:"_fillCuisine",value:function(){if(this._restaurant.cuisine_type_id){var e=this._restaurant.cuisine_type_id;a.default.fetchCuisineById(e,function(e,t){t?document.getElementById("cuisine-name").textContent=t.name:console.error(e)})}}},{key:"_fillReviewsHTML",value:function(){if(this._restaurant.reviews){var e=this._restaurant.reviews,t=document.getElementById("review-template").innerHTML,n="",r=0,o=!0,i=!1,a=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;n+=t.replace(/{id}/g,r++).replace(/{name}/g,l.name).replace(/{date}/g,l.date).replace(/{rating}/g,l.rating).replace(/{comments}/g,l.comments)}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}var c=document.getElementById("reviews");if(n)c.innerHTML=n;else{var d=document.getElementById("empty-view").innerHTML;c.innerHTML=d}}}}]),e}();n.default=s},{"./_dbhelper.js":4,"./_utils.js":5}]},{},[2]);