!function o(s,u,a){function c(e,t){if(!u[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=u[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,u,a)}return u[e].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,d,e){"use strict";!function(){function s(r){return new Promise(function(t,e){r.onsuccess=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function o(r,n,i){var o,t=new Promise(function(t,e){s(o=r[n].apply(r,i)).then(t,e)});return t.request=o,t}function t(t,r,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[r][e]},set:function(t){this[r][e]=t}})})}function e(e,r,n,t){t.forEach(function(t){t in n.prototype&&(e.prototype[t]=function(){return o(this[r],t,arguments)})})}function r(e,r,n,t){t.forEach(function(t){t in n.prototype&&(e.prototype[t]=function(){return this[r][t].apply(this[r],arguments)})})}function n(t,n,e,r){r.forEach(function(r){r in e.prototype&&(t.prototype[r]=function(){return t=this[n],(e=o(t,r,arguments)).then(function(t){if(t)return new u(t,e.request)});var t,e})})}function i(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function a(t){this._store=t}function c(r){this._tx=r,this.complete=new Promise(function(t,e){r.oncomplete=function(){t()},r.onerror=function(){e(r.error)},r.onabort=function(){e(r.error)}})}function h(t,e,r){this._db=t,this.oldVersion=e,this.transaction=new c(r)}function f(t){this._db=t}t(i,"_index",["name","keyPath","multiEntry","unique"]),e(i,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),n(i,"_index",IDBIndex,["openCursor","openKeyCursor"]),t(u,"_cursor",["direction","key","primaryKey","value"]),e(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(r){r in IDBCursor.prototype&&(u.prototype[r]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[r].apply(e._cursor,t),s(e._request).then(function(t){if(t)return new u(t,e._request)})})})}),a.prototype.createIndex=function(){return new i(this._store.createIndex.apply(this._store,arguments))},a.prototype.index=function(){return new i(this._store.index.apply(this._store,arguments))},t(a,"_store",["name","keyPath","indexNames","autoIncrement"]),e(a,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),n(a,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(a,"_store",IDBObjectStore,["deleteIndex"]),c.prototype.objectStore=function(){return new a(this._tx.objectStore.apply(this._tx,arguments))},t(c,"_tx",["objectStoreNames","mode"]),r(c,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new a(this._db.createObjectStore.apply(this._db,arguments))},t(h,"_db",["name","version","objectStoreNames"]),r(h,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new c(this._db.transaction.apply(this._db,arguments))},t(f,"_db",["name","version","objectStoreNames"]),r(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[a,i].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),r=e[e.length-1],n=this._store||this._index,i=n[o].apply(n,e.slice(0,-1));i.onsuccess=function(){r(i.result)}})})}),[i,a].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,r){var n=this,i=[];return new Promise(function(e){n.iterateCursor(t,function(t){t?(i.push(t.value),void 0===r||i.length!=r?t.continue():e(i)):e(i)})})})});var l={open:function(t,e,r){var n=o(indexedDB,"open",[t,e]),i=n.request;return i.onupgradeneeded=function(t){r&&r(new h(i.result,t.oldVersion,i.transaction))},n.then(function(t){return new f(t)})},delete:function(t){return o(indexedDB,"deleteDatabase",[t])}};void 0!==d?(d.exports=l,d.exports.default=d.exports):self.idb=l}()},{}],2:[function(t,e,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=t("./runtime"),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},{"./runtime":3}],3:[function(t,L,e){!function(t){"use strict";var a,e=Object.prototype,c=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag",s="object"==typeof L,u=t.regeneratorRuntime;if(u)s&&(L.exports=u);else{(u=t.regeneratorRuntime=s?L.exports:{}).wrap=m;var f="suspendedStart",l="suspendedYield",d="executing",p="completed",v={},h={};h[i]=function(){return this};var y=Object.getPrototypeOf,_=y&&y(y(D([])));_&&_!==e&&c.call(_,i)&&(h=_);var g=R.prototype=w.prototype=Object.create(h);x.prototype=g.constructor=R,R.constructor=x,R[o]=x.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,R):(t.__proto__=R,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(g),t},u.awrap=function(t){return{__await:t}},k(j.prototype),j.prototype[n]=function(){return this},u.AsyncIterator=j,u.async=function(t,e,r,n){var i=new j(m(t,e,r,n));return u.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},u.keys=function(r){var n=[];for(var t in r)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},u.values=D,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,e){return o.type="throw",o.arg=r,n.next=t,e&&(n.method="next",n.arg=a),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:D(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=a),v}}}function m(t,e,r,n){var o,s,u,a,i=e&&e.prototype instanceof w?e:w,c=Object.create(i.prototype),h=new q(n||[]);return c._invoke=(o=t,s=r,u=h,a=f,function(t,e){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===t)throw e;return E()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=S(r,u);if(n){if(n===v)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(a===f)throw a=p,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);a=d;var i=b(o,s,u);if("normal"===i.type){if(a=u.done?p:l,i.arg===v)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(a=p,u.method="throw",u.arg=i.arg)}}),c}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function R(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(a){var e;this._invoke=function(r,n){function t(){return new Promise(function(t,e){!function e(t,r,n,i){var o=b(a[t],a,r);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==typeof u&&c.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,n,i)},function(t){e("throw",t,n,i)}):Promise.resolve(u).then(function(t){s.value=t,n(s)},i)}i(o.arg)}(r,n,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var r=t.iterator[e.method];if(r===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,S(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=b(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,v;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function D(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(c.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=a,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},{}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),a=n(t("regenerator-runtime")),s=n(t("idb"));function n(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function c(t){return function(){var u=t.apply(this,arguments);return new Promise(function(o,s){return function e(t,r){try{var n=u[t](r),i=n.value}catch(t){return void s(t)}if(!n.done)return Promise.resolve(i).then(function(t){e("next",t)},function(t){e("throw",t)});o(i)}("next")})}}var h=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"object"===i(t.instance)?t.instance:(this._baseUrl="http://localhost:1337",this._dbRestaurantsRequest=new Request(this._baseUrl+"/restaurants"),this._dbNeighborhoodTypesRequest=new Request(this._baseUrl+"/neighborhoods"),this._dbCuisineTypesRequest=new Request(this._baseUrl+"/cuisines"),this._dbReviewsRequest=new Request(this._baseUrl+"/reviews"),this._stores={restaurants:"restaurants",neighborhoods:"neighborhoods",cuisines:"cuisines",reviews:"reviews"},this._restaurants=[],this._neighborhoods=[],this._cuisines=[],this._reviews=[],t.instance=this)}var e,r,n;return o(t,[{key:"initData",value:(n=c(a.default.mark(function t(){var r=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all";return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===this._stores.restaurants?3:t.t0===this._stores.neighborhoods?6:t.t0===this._stores.cuisines?7:t.t0===this._stores.reviews?8:9;break;case 3:return t.next=5,this._fetchRestaurants().then(function(t){var e;(e=r._restaurants).push.apply(e,u(t))}).then(function(){return r._addRestaurants(r._restaurants)});case 5:return t.abrupt("return",t.sent);case 6:return t.abrupt("return",this._fetchNeighborhoods().then(function(t){var e;(e=r._neighborhoods).push.apply(e,u(t))}).then(function(){return r._addNeighborhoods(r._neighborhoods)}));case 7:return t.abrupt("return",this._fetchCuisines().then(function(t){var e;(e=r._cuisines).push.apply(e,u(t))}).then(function(){return r._addCuisines(r._cuisines)}));case 8:return t.abrupt("return",this._fetchReviews().then(function(t){var e;(e=r._reviews).push.apply(e,u(t))}).then(function(){return r._addReviews(r._reviews)}));case 9:return t.next=11,Promise.all([this._fetchRestaurants().then(function(t){var e;(e=r._restaurants).push.apply(e,u(t))}),this._fetchNeighborhoods().then(function(t){var e;(e=r._neighborhoods).push.apply(e,u(t))}),this._fetchCuisines().then(function(t){var e;(e=r._cuisines).push.apply(e,u(t))}),this._fetchReviews().then(function(t){var e;(e=r._reviews).push.apply(e,u(t))})]).then(function(){return r._addRestaurants(r._restaurants),r._addNeighborhoods(r._neighborhoods),r._addCuisines(r._cuisines),r._addReviews(r._reviews),Promise.resolve(!0)});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"_fillIdb",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._stores.restaurants;return this.dbPromise.then(function(t){if(!t)return Promise.reject("db undefined");var e=t.transaction(i,"readwrite"),r=e.objectStore(i);return n&&(Array.isArray(n)?n.forEach(function(t){r.put(t)}):r.put(n)),e.complete}).then(function(){return n})}},{key:"_addRestaurants",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this._fillIdb(t)}},{key:"_addNeighborhoods",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this._fillIdb(t,this._stores.neighborhoods)}},{key:"_addCuisines",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this._fillIdb(t,this._stores.cuisines)}},{key:"_addReviews",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return this._fillIdb(t,this._stores.reviews)}},{key:"addReview",value:function(t,e){var r=this;return e?this._fillIdb(t,this._stores.reviews).then(function(t){return r._reviews.push(t),t}):this._postData(this._dbReviewsRequest,t).then(function(t){return r._reviews.push(t),t})}},{key:"_getCachedDataByStore",value:function(){var e,i=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._stores.restaurants;return this.dbPromise.then((e=c(a.default.mark(function t(e){var r,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject("db undefined"));case 2:return r=e.transaction(o),n=r.objectStore(o),t.next=6,n.getAll();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,i)})),function(t){return e.apply(this,arguments)})).then(function(t){return t&&0<t.length?t:Promise.reject("db info: store ${store} empty")})}},{key:"_getCachedDataByKey",value:function(i){var e,o=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._stores.restaurants;return this.dbPromise.then((e=c(a.default.mark(function t(e){var r,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject("db undefined"));case 2:return r=e.transaction(s),n=r.objectStore(s),t.next=6,n.get(i);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,o)})),function(t){return e.apply(this,arguments)})).then(function(t){return t||Promise.reject("db info: data not found")})}},{key:"_getIDBStoreNameByRequest",value:function(t){switch(t.url){case this._dbNeighborhoodTypesRequest.url:return this._stores.neighborhoods;case this._dbCuisineTypesRequest.url:return this._stores.cuisines;case this._dbReviewsRequest.url:return this._stores.reviews;default:return this._stores.restaurants}}},{key:"_postData",value:(r=c(a.default.mark(function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"POST",body:JSON.stringify(r)}).then(function(t){return t.json()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_putData",value:(e=c(a.default.mark(function t(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"PUT",body:JSON.stringify(r)}).then(function(t){return t.json()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_fetchData",value:function(e){var t=this._getIDBStoreNameByRequest(e);return this._getCachedDataByStore(t).catch(function(t){return fetch(e).then(function(t){return t.ok?t.json():Promise.reject(t.status)})})}},{key:"_fetchDataByKey",value:function(e,t){var r=this._getIDBStoreNameByRequest(e);return this._getCachedDataByKey(t,r).catch(function(t){return fetch(e).then(function(t){return t.ok?t.json():Promise.reject(t.status)})})}},{key:"_fetchRestaurants",value:function(){return this._fetchData(this._dbRestaurantsRequest)}},{key:"_fetchRestaurantById",value:function(t){return this._fetchDataByKey(this._dbRestaurantsRequest,t)}},{key:"_fetchNeighborhoods",value:function(){return this._fetchData(this._dbNeighborhoodTypesRequest)}},{key:"_fetchCuisines",value:function(){return this._fetchData(this._dbCuisineTypesRequest)}},{key:"_fetchReviews",value:function(){return this._fetchData(this._dbReviewsRequest)}},{key:"getRestaurantById",value:function(e){return this._restaurants.find(function(t){return t.id===parseInt(e)})}},{key:"getNeighborhoodById",value:function(e){return this._neighborhoods.find(function(t){return t.id===parseInt(e)})}},{key:"getCuisineById",value:function(e){return this._cuisines.find(function(t){return t.id===parseInt(e)})}},{key:"filterRestaurantByCuisineAndNeighborhood",value:function(e,r){if(this._restaurants){var t=this._restaurants;return-1!=e&&(t=t.filter(function(t){return t.cuisine_type_id==e})),-1!=r&&(t=t.filter(function(t){return t.neighborhood_type_id==r})),t}return null}},{key:"getReviewsByRestaurantId",value:function(e){return this._reviews.filter(function(t){return t.restaurant_id==e})}},{key:"syncData",value:function(){return null}},{key:"_updateReview",value:function(t){var e=t.id,r=t.name,n=t.rating,i=t.comments,o=new URL(this._dbReviewsRequest.url+"/"+e);return this._putData(o,{name:r,rating:n,comments:i})}},{key:"updateReviews",value:function(){var s=this;return this._getCachedDataByStore(this._stores.reviews).then(function(t){return Promise.all(t.map(function(o){var t=new URL(s._dbReviewsRequest.url+"/"+o.id);return fetch(t).then(function(t){if(t&&t.ok)return s._updateReview(o).then(function(e){var t=s._reviews.findIndex(function(t){return t.id===e.id});return s._reviews.splice(t,1,e),e});var e=o.restaurant_id,r=o.name,n=o.rating,i=o.comments;return s.addReview({restaurant_id:e,name:r,rating:n,comments:i},!1).then(function(t){return s._reviews.push(t),t})}).catch(function(t){return function(t){return console.error(t)}})})).catch(function(t){return console.error(t)})})}},{key:"updateFavoriteByRestaurant",value:function(o,s,t){var u=this;if(t)return this.dbPromise.then((e=c(a.default.mark(function t(e){var r,n,i;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject("db undefined"));case 2:return r=e.transaction(u._stores.restaurants,"readwrite"),n=r.objectStore(u._stores.restaurants),t.next=6,n.get(parseInt(o.id));case 6:return(i=t.sent).is_favorite=s,n.put(i),t.abrupt("return",r.complete);case 10:case"end":return t.stop()}},t,u)})),function(t){return e.apply(this,arguments)})).then(function(){return u._fetchRestaurantById().then(function(t){return u._restaurants.splice(0).push(t),t.find(function(t){return t.id===o.id})})});var e,r=new URL(this._dbRestaurantsRequest.url+"/"+o.id+"/?is_favorite="+s);return this._putData(r).then(function(e){var t=u._restaurants.findIndex(function(t){return t.id===e.id});return u._restaurants.splice(t,1,e),e})}},{key:"restaurants",get:function(){return this._restaurants}},{key:"neighborhoods",get:function(){return this._neighborhoods}},{key:"cuisines",get:function(){return this._cuisines}},{key:"reviews",get:function(){return this._reviews}},{key:"stores",get:function(){return this._stores}},{key:"dbPromise",get:function(){var e=this;return s.default.open("fressen-db",2,function(t){switch(t.oldVersion){case 0:t.objectStoreNames.contains(e._stores.restaurants)||t.createObjectStore(e._stores.restaurants,{keyPath:"id"}),t.objectStoreNames.contains(e._stores.neighborhoods)||t.createObjectStore(e._stores.neighborhoods,{keyPath:"id"}),t.objectStoreNames.contains(e._stores.cuisines)||t.createObjectStore(e._stores.cuisines,{keyPath:"id"});case 1:t.objectStoreNames.contains(e._stores.reviews)||t.createObjectStore(e._stores.reviews,{keyPath:"id",autoIncrement:!0})}})}}]),t}(),f=new h;Object.freeze(f),r.default=h},{idb:1,"regenerator-runtime":2}],5:[function(t,e,r){"use strict";var n,i=t("./js/_dbhelper_promises.js"),o=(n=i)&&n.__esModule?n:{default:n};var s="fressen-static-v3",u="fressen-content-imgs",a=new o.default;self.addEventListener("install",function(t){var u=[".","./index.html","./restaurant.html","./css/index.css","./css/restaurant.css","./css/restaurant-min-600px.css","./css/restaurant-min-850px.css","./css/restaurant-min-1000px.css","./img/placeholder.png","./img/material-icons/back.svg","./img/material-icons/directions.svg","./img/material-icons/favorite-border-red.svg","./img/material-icons/favorite-border-white.svg","./img/material-icons/favorite-red.svg","./img/material-icons/favorite-white.svg","./img/material-icons/portrait.svg","./img/material-icons/restaurant.svg","./app.bundle.js"],a=[];t.waitUntil(caches.open(s).then(function(r){r.addAll(u);var t=function(t){var e=new Request(t,{mode:"no-cors"});fetch(e).then(function(t){r.put(e,t)}).catch(function(){console.error("Fetching request failed: "+e.url)})},e=!0,n=!1,i=void 0;try{for(var o,s=a[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){t(o.value)}}catch(t){n=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw i}}}))}),self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(t){return Promise.all(t.filter(function(t){return!(t.startsWith(s)||t.startsWith(u))}).map(function(t){caches.delete(t)}))}))}),self.addEventListener("fetch",function(e){var t=new URL(e.request.url);if(t.origin===location.origin&&t.port===location.port){if(t.pathname.includes("restaurant.html"))return void e.respondWith(caches.match("./restaurant.html"));if(t.pathname.includes("/img/restaurant")||t.pathname.includes("/img/cuisines")||t.pathname.includes("/img/neighborhoods"))return void e.respondWith(h(e.request))}t.href.includes("key=AIzaSyBni5ZJUEvoGfyJO2yCNTbDW9B2eIs1pDE")?e.respondWith(c(e.request)):e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))});var c=function(t){return fetch(t).catch(function(){return new Response("initMap();")})},h=function(r){var n=r.url.replace(/(-small)*(@2x)*\.jpg$/,"");return caches.open(u).then(function(e){return e.match(n).then(function(t){return t||fetch(r).then(function(t){return e.put(n,t.clone()),t}).catch(function(){console.error("Fetching request failed: "+r)})})})};self.addEventListener("message",function(t){if(t.data)switch(t.data){case"skipWaiting":self.skipWaiting()}}),self.addEventListener("sync",function(t){if(t.tag)switch(t.tag){case"syncIndexedDB":t.waitUntil(a.updateReviews())}})},{"./js/_dbhelper_promises.js":4}]},{},[5]);