"use strict";var CACHE_VERSION=5,STATIC_CACHE_NAME="fressen-static-v"+CACHE_VERSION,CONTENT_IMGS_CACHE="fressen-content-imgs",ALL_CACHES=[STATIC_CACHE_NAME,CONTENT_IMGS_CACHE],GOOGLE_MAP_API_KEY="AIzaSyBni5ZJUEvoGfyJO2yCNTbDW9B2eIs1pDE";self.addEventListener("install",function(t){var c=[".","./index.html","./restaurant.html","./css/app.bundle.css","./app.bundle.js","https://fonts.gstatic.com/s/lato/v14/S6uyw4BMUTPHjxAwXjeu.woff2","https://fonts.gstatic.com/s/lato/v14/S6uyw4BMUTPHjx4wXg.woff2","https://fonts.gstatic.com/s/lato/v14/S6u9w4BMUTPHh50XSwaPGR_p.woff2","https://fonts.gstatic.com/s/lato/v14/S6u9w4BMUTPHh50XSwiPGQ.woff2","https://fonts.gstatic.com/s/materialicons/v36/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2"],r=["https://fonts.googleapis.com/css?family=Lato:400,900","https://fonts.googleapis.com/icon?family=Material+Icons","https://maps.googleapis.com/maps/api/js?key=AIzaSyBni5ZJUEvoGfyJO2yCNTbDW9B2eIs1pDE&libraries=places&callback=initMap"];t.waitUntil(caches.open(STATIC_CACHE_NAME).then(function(n){n.addAll(c);var t=function(t){var e=new Request(t,{mode:"no-cors"});fetch(e).then(function(t){n.put(e,t)}).catch(function(){console.error("Fetching request failed: "+e)})},e=!0,s=!1,a=void 0;try{for(var i,o=r[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){t(i.value)}}catch(t){s=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw a}}}))}),self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(t){return Promise.all(t.filter(function(t){return t.startsWith(STATIC_CACHE_NAME)&&!ALL_CACHES.includes(t)}).map(function(t){caches.delete(t)}))}))}),self.addEventListener("fetch",function(e){var t=new URL(e.request.url);if(t.origin===location.origin){if(t.pathname.includes("restaurant.html"))return void e.respondWith(caches.match("./restaurant.html"));if(t.pathname.includes("/img"))return void e.respondWith(_servePhoto(e.request))}t.href.includes("key="+GOOGLE_MAP_API_KEY)?e.respondWith(_serveMap(e.request)):e.respondWith(caches.match(e.request).then(function(t){return console.log(t,e.request),t||fetch(e.request)}))});var _serveMap=function(t){return fetch(t).catch(function(){return new Response("initMap();")})},_servePhoto=function(n){var s=n.url.replace(/(-small)*(@2x)*\.jpg$/,"");return caches.open(CONTENT_IMGS_CACHE).then(function(e){return e.match(s).then(function(t){return t||fetch(n).then(function(t){return e.put(s,t.clone()),t}).catch(function(){console.error("Fetching request failed: "+n)})})})};self.addEventListener("message",function(t){"skipWaiting"===t.data.action&&self.skipWaiting()});